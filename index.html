<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liang Li | Personal Website</title>
    <link href="https://fonts.cdnfonts.com/css/br-segma" rel="stylesheet">
    <link href="https://fonts.cdnfonts.com/css/noto-sans-devanagari" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/7b386abee7.js" crossorigin="anonymous"></script>
    <!-- Three.js Library for advanced 3D particle effects -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
<div id="header">
    <!-- Animated particles background -->
    <div id="particles-js"></div>
    <div class="container">
        <nav>
            <img src="images/logo.png" class="logo">
            <ul id="sidemenu">
                <li><a href="#header">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#portfolio">Portfolio</a></li>
                <li><a href="#publications">Publication</a></li>
                <li><a href="#contact">Contact</a></li>
                <i class="fas fa-times" onclick="closemenu()"></i>
            </ul>
            <i class="fas fa-bars" onclick="openmenu()"></i>
        </nav>
        <div class="header-text">
            <p>Engineer | Scientist</p>
            <h1>Hi, I'm <span>Liang</span><br>Based in Sunnyvale</h1>
        </div>
    </div>
</div>

<div class="section-divider"></div>

<!-- ----------------about------------------ -->
<div id="about">
    <div class="container">
        <div class="row">
            <div class="about-col-1">
                <img src="images/bg2.jpg">
            </div>
            <div class="about-col-2">
                <h1 class="sub-title">About Me</h1>
                <p>My name is <span style="display:inline; color: #6366f1;">Liang Li</span>, and I'm an engineer based in Sunnyvale, CA, with a deep passion for <span style="display:inline; color: #6366f1;">technologies</span> and <span style="display:inline; color: #6366f1;">science</span>. I thrive at the intersection where equations meet execution, fascinated by everything from emerging semicondutor chips to groundbreaking quantum computing breaktrhoughs.
                <br><br>Since 2022, I've applied this passion as an Engineer at <span>ASML</span>. My journey here was paved with valuable research experiences, including roles as a Research Assistant at Fermilab, a Graduate Student Fellow at University of Pennsylvannia, and a Research Assistant at UC Davis.
                <br><br>Outside of my professional pursuits, you might find me practicing Ping-pong at local sport clubs, playing my guitar, or exploring museums in different cities.</p>

                <div class="tab-titles">
                    <p class="tab-links active-link" onclick="opentab('skills')">Skills</p>
                    <p class="tab-links" onclick="opentab('experience')">Experience</p>
                    <p class="tab-links" onclick="opentab('education')">Education</p>
                    <p class="tab-links" onclick="opentab('moreover')">Moreover</p>
                </div>
                <div class="tab-contents active-tab" id="skills">
                    <ul>
                        <li><span>Programming Skills</span><br>Python, C, MATLAB</li>
                        <li><span>Data Analytics</span><br>Python, SQL, Excel</li>
                        <li><span>Laboratory Skills</span><br>Electron Optics, Confocal spectroscopy, Fiber Optics</li>
                        <li><span>Simulation</span><br>Ansys Lumerical</li>
                        <li><span>UI / UX</span><br>HTML, CSS</li>
                    </ul>
                </div>
                <div class="tab-contents" id="experience">
                    <ul>
                        <li><span>2022 - Present</span><br>Electron Optics Engineer at <span style="display:inline; color: #00a6fb;">ASML</span></li>
                        <li><span>2021 - 2022</span><br>Graduate Student Fellow at <span style="display:inline; color: #00a6fb;">University of Pennsylvannia</span></li>
                        <li><span>2019</span><br>Research Assistant at <span style="display:inline; color: #00a6fb;">Fermilab</span></li>
                        <li><span>2018 - 2020</span><br>Research Assistant at <span style="display:inline; color: #00a6fb;">UC Davis</span></li>
                        <li style="visibility: hidden;"><span>&nbsp;</span><br>&nbsp;</li>
                    </ul>
                </div>
                <div class="tab-contents" id="education">
                    <ul>
                        <li><span>2022</span><br>MSE <span style="display:inline; color: #00a6fb;">Nanotechnology</span> from University of Pennsylvannia</li>
                        <li><span>2020</span><br>BS <span style="display:inline; color: #00a6fb;">Applied Physics</span> from Univeristy of California, Davis</li>
                        <li style="visibility: hidden;"><span>&nbsp;</span><br>&nbsp;</li>
                        <li style="visibility: hidden;"><span>&nbsp;</span><br>&nbsp;</li>
                        <li style="visibility: hidden;"><span>&nbsp;</span><br>&nbsp;</li>
                    </ul>
                </div>
                <div class="tab-contents" id="moreover">
                    <ul>
                        <li><span>2021 - 2022</span><br><span style="display:inline; color: #00a6fb;">President</span>, Nanoquackers at University of Pennsylvannia</li>
                        <li><span>2016 - 2018</span><br><span style="display:inline; color: #00a6fb;">Writer</span>, Chinese Student and Scholar Association at UC Davis</li>
                        <li style="visibility: hidden;"><span>&nbsp;</span><br>&nbsp;</li>
                        <li style="visibility: hidden;"><span>&nbsp;</span><br>&nbsp;</li>
                        <li style="visibility: hidden;"><span>&nbsp;</span><br>&nbsp;</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="section-divider"></div>

 <!-- -----------Portfolio-------------- -->
 <div id="portfolio">
    <div class="container">
        <h1 class="sub-title">My Projects</h1>
        <div class="work-list">
            <div class="work">
                <img src="images/work-1.png">
                <div class="layer">
                    <h3>SEM Detector Design Improvement</h3>
                    <p>Design Engineer<br><br>Designed and executed experiments to resolve detector charging issue, resulting in a 40% increase in throughput (TPT) for tools at TSMC.</p>
                    <!-- <a href="#"><i class="fa-solid fa-arrow-up-right-from-square"></i></a> -->
                </div>
            </div>
            <div class="work">
                <img src="images/work-2.png">
                <div class="layer">
                    <h3>Image Shift Algorithm</h3>
                    <p>Design Engineer<br><br>Developed an algorithm to detect and quantify image shift in SEMs, which helps identify key factors affecting resolution. This led to a successful feasibility study for metrology improvement.</p>
                    <!-- <a href="#"><i class="fa-solid fa-arrow-up-right-from-square"></i></a> -->
                </div>
            </div>
            <div class="work">
                <img src="images/work-3.png">
                <div class="layer">
                    <h3>Experiment Pipeline Optimization</h3>
                    <p>Graduate Student Fellow<br><br>Refined the experiment pipeline of quantum dots synthesis, reducing experiment time and improving outcome quality. The new pipeline was integrated as a project into the core course of the Nanotechnology program.</p>
                    <!-- <a href="#"><i class="fa-solid fa-arrow-up-right-from-square"></i></a> -->
                </div>
            </div>
            <div class="work">
                <img src="images/work-4.png">
                <div class="layer">
                    <h3>Quid Pro Quo</h3>
                    <p>Software Engineer<br><br>Developed a suite of user-friendly desktop applications to visualize and explain quantum optics experiments. This project won the California division of the Qiskit Summer Jam Hackathon.</p>
                    <!-- <a href="#"><i class="fa-solid fa-arrow-up-right-from-square"></i></a> -->
                </div>
            </div>
        </div>
        <a href="#" class="btn">See more</a>
    </div>
 </div>

<div class="section-divider"></div>

<!-- --------------publications------------ -->
 <div id="publications">
    <div class="container">
        <h1 class="sub-title">My Publications</h1>
        <div class="services-list">
            <div>
                <!-- <i class="fa-solid fa-code"></i> -->
                <h2>ICECAP: a 3-in-1 integrated cryogenic system for emission, collection and photon-detection from near infrared quantum nanophotonic devices</h2>
                <p>Co-author<br><br>2024</p>
                <a href="https://arxiv.org/html/2401.10509v1"><i class="fa-solid fa-arrow-up-right-from-square"></i>Learn more</a>
            </div>
            <div>
                <!-- <i class="fa-solid fa-crop-simple"></i> -->
                <h2>Quantum photonics in triangular-cross-section nanodevices in silicon carbide<br><br></h2>
                <p>Co-author<br><br>2021</p>
                <a href="https://arxiv.org/abs/2012.02350"><i class="fa-solid fa-arrow-up-right-from-square"></i>Learn more</a>
            </div>
        </div>
        <a href="#" class="btn">See more</a>
    </div>
 </div>

<div class="section-divider"></div>

<!-- ---------------contact--------------- -->
 <div id="contact">
    <div class="container">
        <div class="row">
            <div class="contact-left">
                <h1 class="sub-title">Contact Me</h1>
                <p><i class="fa-solid fa-envelope"></i>liliang11112222@gmail.com</p>
                <div class="social-icons">
                    <a href="https://www.linkedin.com/in/liang-li-583abb143/"><i class="fa-brands fa-linkedin"></i></a>
                </div>
            </div>
            <div class="contact-right">
                <form name="submit-to-google-sheet">
                    <input type="text" name="Name" placeholder="Your Name" required>
                    <input type="email" name="Email" placeholder="Your email" required>
                    <textarea name="Message" rows="6" placeholder="Your Message"></textarea>
                    <button type="submit" class="btn btn2">Submit</button>
                </form>
                <span id="msg"></span>
            </div>
        </div>
    </div>
    <div class="copyright">
        <p>Copytright @Liang Li</p>
    </div>
 </div>


 <!-- ----------Script------------- -->
<script>
    var tablinks = document.getElementsByClassName("tab-links");
    var tabcontents = document.getElementsByClassName("tab-contents");

    function opentab(tabname){
        for(tablink of tablinks){
            tablink.classList.remove("active-link");
        }
        for(tabcontent of tabcontents){
            tabcontent.classList.remove("active-tab");
        }
        event.currentTarget.classList.add("active-link");
        document.getElementById(tabname).classList.add("active-tab");
    }
</script>


<script>
    var sidemenu = document.getElementById("sidemenu");

    function openmenu(){
        sidemenu.style.right = "0";
    }
    function closemenu(){
        sidemenu.style.right = "-200px";
    }
</script>


<script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbyicol1CuqRAlPD_FT718AX4OAC6dFmPFko_QyuzFTOeZD-eknn_tCLxM4e_-uyQBqB/exec'
    const form = document.forms['submit-to-google-sheet']
    const msg = document.getElementById("msg")
  
    form.addEventListener('submit', e => {
      e.preventDefault()
      fetch(scriptURL, { method: 'POST', body: new FormData(form)})
        .then(response => {
            msg.innerHTML = "Message sent successfully"
            setTimeout(function(){
                msg.innerHTML = ""
            },5000)
            form.reset()
        })
        .catch(error => console.error('Error!', error.message))
    })
  </script>

  <!-- Advanced Three.js Particle System -->
  <script>
    /**
     * Advanced 3D Particle System using Three.js
     * Creates floating particles with dynamic connections, lighting effects, and smooth interactions
     */
    
    class AdvancedParticleSystem {
        constructor() {
            this.container = document.getElementById('particles-js');
            this.scene = null;
            this.camera = null;
            this.renderer = null;
            this.particles = [];
            this.particleGeometry = null;
            this.particleMaterial = null;
            this.particleSystem = null;
            this.mouse = { x: 0, y: 0 };
            this.windowHalf = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
            
            // Configuration
            this.config = {
                particleCount: window.innerWidth <= 600 ? 150 : 300, // More particles for richer effect
                maxDistance: 150,
                repulsionRadius: 100,
                colors: {
                    primary: 0x6366f1,   // Indigo
                    secondary: 0xE7D1BB, // Warm beige
                    accent: 0x8e94f2     // Light indigo
                }
            };
            
            this.init();
            this.animate();
        }
    
        
        init() {
            // Create scene
            this.scene = new THREE.Scene();
            
            // Create camera with perspective for 3D depth
            this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 3000);
            this.camera.position.z = 1000;
            
            // Create renderer with enhanced settings
            this.renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            this.renderer.setSize(window.innerWidth, window.innerHeight);
            this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            this.container.appendChild(this.renderer.domElement);
            
            // Create particle system
            this.createParticles();
            this.createConnections();
            
            // Add event listeners
            this.addEventListeners();
        }
        
        createParticles() {
            this.particleGeometry = new THREE.BufferGeometry();
            const positions = new Float32Array(this.config.particleCount * 3);
            const colors = new Float32Array(this.config.particleCount * 3);
            const sizes = new Float32Array(this.config.particleCount);
            
            // Initialize particle data
            this.particles = [];
            
            for (let i = 0; i < this.config.particleCount; i++) {
                const i3 = i * 3;
                
                // Random positions in 3D space
                const x = (Math.random() - 0.5) * 2000;
                const y = (Math.random() - 0.5) * 2000;
                const z = (Math.random() - 0.5) * 1000;
                
                positions[i3] = x;
                positions[i3 + 1] = y;
                positions[i3 + 2] = z;
                
                // Color variations - mix of indigo and beige
                const colorChoice = Math.random();
                let color;
                if (colorChoice < 0.7) {
                    color = new THREE.Color(this.config.colors.primary); // Indigo
                } else {
                    color = new THREE.Color(this.config.colors.secondary); // Beige
                }
                
                colors[i3] = color.r;
                colors[i3 + 1] = color.g;
                colors[i3 + 2] = color.b;
                
                // Random sizes
                sizes[i] = Math.random() * 4 + 1;
                
                // Store particle data for animation
                this.particles.push({
                    velocity: {
                        x: (Math.random() - 0.5) * 0.5,
                        y: (Math.random() - 0.5) * 0.5,
                        z: (Math.random() - 0.5) * 0.5
                    },
                    originalColor: color.clone(),
                    basePosition: { x, y, z }
                });
            }
            
            this.particleGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            this.particleGeometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
            this.particleGeometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));
            
            // Enhanced particle material
            this.particleMaterial = new THREE.PointsMaterial({
                size: 3,
                sizeAttenuation: true,
                vertexColors: true,
                transparent: true,
                opacity: 0.8,
                blending: THREE.AdditiveBlending
            });
            
            this.particleSystem = new THREE.Points(this.particleGeometry, this.particleMaterial);
            this.scene.add(this.particleSystem);
        }
        
        createConnections() {
            // Create dynamic line connections with comet trails
            this.connectionGeometry = new THREE.BufferGeometry();
            this.connectionMaterial = new THREE.LineBasicMaterial({
                color: 0x6366f1,
                opacity: 0.4,
                transparent: true,
                blending: THREE.AdditiveBlending
            });
            
            this.connections = new THREE.LineSegments(this.connectionGeometry, this.connectionMaterial);
            this.scene.add(this.connections);
            
            // Comet trail system
            this.trailSegments = [];
            this.maxTrailLength = 8; // Number of trail segments per connection
            this.trailDecay = 0.85; // How fast trails fade
            
            // Create trail geometry for comet effects
            this.trailGeometry = new THREE.BufferGeometry();
            this.trailMaterial = new THREE.ShaderMaterial({
                uniforms: {
                    time: { value: 0 }
                },
                vertexShader: `
                    attribute float alpha;
                    attribute vec3 color;
                    varying float vAlpha;
                    varying vec3 vColor;
                    uniform float time;
                    
                    void main() {
                        vAlpha = alpha;
                        vColor = color;
                        
                        // Add subtle movement to trail segments
                        vec3 pos = position;
                        pos.x += sin(time * 2.0 + position.y * 0.01) * 0.5;
                        pos.y += cos(time * 1.5 + position.x * 0.01) * 0.3;
                        
                        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
                    }
                `,
                fragmentShader: `
                    varying float vAlpha;
                    varying vec3 vColor;
                    uniform float time;
                    
                    void main() {
                        // Add pulsing glow effect
                        float glow = 0.8 + sin(time * 3.0) * 0.2;
                        vec3 finalColor = vColor * glow;
                        
                        gl_FragColor = vec4(finalColor, vAlpha);
                    }
                `,
                transparent: true,
                blending: THREE.AdditiveBlending,
                depthTest: false
            });
            
            this.trailLines = new THREE.LineSegments(this.trailGeometry, this.trailMaterial);
            this.scene.add(this.trailLines);
        }
        
        updateConnections() {
            const positions = this.particleGeometry.attributes.position.array;
            const connectionPositions = [];
            const currentConnections = [];
            
            // Find current connections between nearby particles
            for (let i = 0; i < this.config.particleCount; i += 2) {
                const i3 = i * 3;
                const pos1 = {
                    x: positions[i3],
                    y: positions[i3 + 1],
                    z: positions[i3 + 2]
                };
                
                for (let j = i + 1; j < Math.min(i + 20, this.config.particleCount); j++) {
                    const j3 = j * 3;
                    const pos2 = {
                        x: positions[j3],
                        y: positions[j3 + 1],
                        z: positions[j3 + 2]
                    };
                    
                    const distance = Math.sqrt(
                        Math.pow(pos1.x - pos2.x, 2) +
                        Math.pow(pos1.y - pos2.y, 2) +
                        Math.pow(pos1.z - pos2.z, 2)
                    );
                    
                    if (distance < this.config.maxDistance) {
                        connectionPositions.push(pos1.x, pos1.y, pos1.z);
                        connectionPositions.push(pos2.x, pos2.y, pos2.z);
                        
                        // Store connection for trail processing
                        currentConnections.push({
                            id: `${i}-${j}`,
                            start: { ...pos1 },
                            end: { ...pos2 },
                            distance: distance
                        });
                    }
                }
            }
            
            // Update main connections
            this.connectionGeometry.setAttribute('position', new THREE.Float32BufferAttribute(connectionPositions, 3));
            
            // Update comet trails
            this.updateCometTrails(currentConnections);
        }
        
        updateCometTrails(currentConnections) {
            const time = Date.now() * 0.001;
            
            // Add new connections to trail history
            currentConnections.forEach(connection => {
                let existingTrail = this.trailSegments.find(trail => trail.id === connection.id);
                
                if (!existingTrail) {
                    // Create new trail
                    this.trailSegments.push({
                        id: connection.id,
                        history: [connection],
                        life: 1.0,
                        color: this.getTrailColor(connection.id)
                    });
                } else {
                    // Update existing trail
                    existingTrail.history.unshift(connection);
                    existingTrail.life = 1.0; // Reset life when connection is active
                    
                    // Limit trail length
                    if (existingTrail.history.length > this.maxTrailLength) {
                        existingTrail.history.pop();
                    }
                }
            });
            
            // Update trail life and remove old trails
            this.trailSegments = this.trailSegments.filter(trail => {
                trail.life *= this.trailDecay;
                return trail.life > 0.01; // Remove very faded trails
            });
            
            // Build trail geometry
            this.buildTrailGeometry();
        }
        
        getTrailColor(connectionId) {
            // Generate consistent color based on connection ID
            const hash = connectionId.split('').reduce((a, b) => {
                a = ((a << 5) - a) + b.charCodeAt(0);
                return a & a;
            }, 0);
            
            const colorSeed = Math.abs(hash) / 2147483647;
            
            if (colorSeed < 0.7) {
                // Indigo variants
                return {
                    r: 0.39 + Math.sin(colorSeed * 10) * 0.1, // #6366f1 with variation
                    g: 0.4 + Math.sin(colorSeed * 12) * 0.1,
                    b: 0.95 + Math.sin(colorSeed * 8) * 0.05
                };
            } else {
                // Beige variants
                return {
                    r: 0.91 + Math.sin(colorSeed * 15) * 0.05, // #E7D1BB with variation
                    g: 0.82 + Math.sin(colorSeed * 18) * 0.05,
                    b: 0.73 + Math.sin(colorSeed * 20) * 0.05
                };
            }
        }
        
        buildTrailGeometry() {
            const trailPositions = [];
            const trailColors = [];
            const trailAlphas = [];
            
            this.trailSegments.forEach(trail => {
                for (let i = 0; i < trail.history.length - 1; i++) {
                    const segment = trail.history[i];
                    const nextSegment = trail.history[i + 1];
                    
                    // Calculate trail segment alpha (fades towards the tail)
                    const segmentAlpha = trail.life * (1 - i / trail.history.length);
                    
                    if (segmentAlpha > 0.01) {
                        // Interpolate between current and next segment for smooth trails
                        const interpolationFactor = 0.3;
                        const startX = segment.start.x;
                        const startY = segment.start.y;
                        const startZ = segment.start.z;
                        const endX = segment.end.x + (nextSegment.end.x - segment.end.x) * interpolationFactor;
                        const endY = segment.end.y + (nextSegment.end.y - segment.end.y) * interpolationFactor;
                        const endZ = segment.end.z + (nextSegment.end.z - segment.end.z) * interpolationFactor;
                        
                        // Add trail segment
                        trailPositions.push(startX, startY, startZ);
                        trailPositions.push(endX, endY, endZ);
                        
                        // Trail colors with intensity variation
                        const intensity = segmentAlpha * (0.8 + Math.sin(Date.now() * 0.003 + i * 0.5) * 0.2);
                        trailColors.push(trail.color.r * intensity, trail.color.g * intensity, trail.color.b * intensity);
                        trailColors.push(trail.color.r * intensity * 0.7, trail.color.g * intensity * 0.7, trail.color.b * intensity * 0.7);
                        
                        // Alpha values for fading effect
                        trailAlphas.push(segmentAlpha);
                        trailAlphas.push(segmentAlpha * 0.5); // Fade towards end
                    }
                }
            });
            
            // Update trail geometry
            this.trailGeometry.setAttribute('position', new THREE.Float32BufferAttribute(trailPositions, 3));
            this.trailGeometry.setAttribute('color', new THREE.Float32BufferAttribute(trailColors, 3));
            this.trailGeometry.setAttribute('alpha', new THREE.Float32BufferAttribute(trailAlphas, 1));
        }
        
        addEventListeners() {
            // Mouse movement
            window.addEventListener('mousemove', (event) => {
                this.mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
                this.mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            });
            
            // Window resize
            window.addEventListener('resize', () => {
                this.camera.aspect = window.innerWidth / window.innerHeight;
                this.camera.updateProjectionMatrix();
                this.renderer.setSize(window.innerWidth, window.innerHeight);
            });
            
            // Click effect
            window.addEventListener('click', (event) => {
                this.addClickEffect(event.clientX, event.clientY);
            });
        }
        
        addClickEffect(x, y) {
            // Create a burst of temporary trail segments radiating from click point
            const burstCount = 12;
            const clickTime = Date.now() * 0.001;
            
            // Convert screen coordinates to world coordinates
            const vector = new THREE.Vector3(
                (x / window.innerWidth) * 2 - 1,
                -(y / window.innerHeight) * 2 + 1,
                0.5
            );
            vector.unproject(this.camera);
            
            const centerPoint = {
                x: vector.x,
                y: vector.y, 
                z: vector.z
            };
            
            // Create radial burst trails
            for (let i = 0; i < burstCount; i++) {
                const angle = (i / burstCount) * Math.PI * 2;
                const radius = 50 + Math.random() * 100;
                const endPoint = {
                    x: centerPoint.x + Math.cos(angle) * radius,
                    y: centerPoint.y + Math.sin(angle) * radius,
                    z: centerPoint.z + (Math.random() - 0.5) * 50
                };
                
                // Create temporary trail
                this.trailSegments.push({
                    id: `burst-${clickTime}-${i}`,
                    history: [{
                        start: centerPoint,
                        end: endPoint,
                        distance: radius
                    }],
                    life: 1.5, // Stronger initial life for burst effect
                    color: {
                        r: 0.91 + Math.random() * 0.09, // Bright beige variants
                        g: 0.82 + Math.random() * 0.09,
                        b: 0.73 + Math.random() * 0.09
                    }
                });
            }
        }
        
        animate() {
            requestAnimationFrame(() => this.animate());
            
            const time = Date.now() * 0.001;
            const positions = this.particleGeometry.attributes.position.array;
            
            // Update particle positions with mouse interaction
            for (let i = 0; i < this.config.particleCount; i++) {
                const i3 = i * 3;
                const particle = this.particles[i];
                
                // Natural floating movement
                positions[i3] += particle.velocity.x;
                positions[i3 + 1] += particle.velocity.y;
                positions[i3 + 2] += particle.velocity.z;
                
                // Mouse repulsion effect
                const mouseWorldX = this.mouse.x * 1000;
                const mouseWorldY = this.mouse.y * 1000;
                const dx = positions[i3] - mouseWorldX;
                const dy = positions[i3 + 1] - mouseWorldY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < this.config.repulsionRadius) {
                    const force = (this.config.repulsionRadius - distance) / this.config.repulsionRadius;
                    positions[i3] += (dx / distance) * force * 3;
                    positions[i3 + 1] += (dy / distance) * force * 3;
                }
                
                // Boundaries - wrap around
                if (positions[i3] > 1000) positions[i3] = -1000;
                if (positions[i3] < -1000) positions[i3] = 1000;
                if (positions[i3 + 1] > 1000) positions[i3 + 1] = -1000;
                if (positions[i3 + 1] < -1000) positions[i3 + 1] = 1000;
                if (positions[i3 + 2] > 500) positions[i3 + 2] = -500;
                if (positions[i3 + 2] < -500) positions[i3 + 2] = 500;
            }
            
            // Update attributes
            this.particleGeometry.attributes.position.needsUpdate = true;
            
            // Update trail shader time uniform for animation
            this.trailMaterial.uniforms.time.value = time;
            
            // Update connections and trails more frequently for smooth comet effects
            if (Math.floor(time * 60) % 2 === 0) {
                this.updateConnections();
            }
            
            // Subtle camera movement following mouse
            this.camera.position.x += (this.mouse.x * 50 - this.camera.position.x) * 0.02;
            this.camera.position.y += (-this.mouse.y * 50 - this.camera.position.y) * 0.02;
            this.camera.lookAt(this.scene.position);
            
            // Rotate the entire particle system slowly
            this.particleSystem.rotation.y += 0.001;
            
            this.renderer.render(this.scene, this.camera);
        }
    }
    
    // Initialize when page loads
    window.addEventListener('load', () => {
        new AdvancedParticleSystem();
    });
  </script>

</body>
</html>